source("Code/00_Simulation_Functions.R")
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 100,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
#extract each imputed version of the validation set
val_imputed_datasets <- imputed_datasets[
which(stringr::str_detect(names(imputed_datasets), "_val"))
]
preds_per_data_set <- purrr::map(.x = val_imputed_datasets,
.f = make_predictions_fnc,
model_coefs = model_coefs,
X_categorical = X_categorical)
preds_per_data_set$RI_val_transportedimputation <- preds_per_data_set$RI_val_transportedimputation %>%
dplyr::select(-.imp)
preds_per_data_set$RI_val_newimputation <- preds_per_data_set$RI_val_newimputation %>%
dplyr::select(-.imp)
preds_per_data_set
source("Code/00_Simulation_Functions.R")
source("Code/00_Simulation_Functions.R")
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 100,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
#Apply the sub-model to the raw (non-imputed) validation data:
Target_measures <- Target_measures %>%
dplyr::bind_rows(purrr::map_dfr(.x = preds_per_data_set[which(names(preds_per_data_set)=="observed_val")],
.f = validation_fnc,
PR_name = "PR_patternsubmodel",
.id = "Validation_Dataset") %>%
dplyr::mutate("CPM" = "PR_patternsubmodel",
.before = "Validation_Dataset"))
View(Target_measures)
View(Target_measures)
source("Code/00_Simulation_Functions.R")
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 100,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 2,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
View(simulation_results)
#Define the size of development, validation and implementation, respectively:
N_dev <- 100000
N_val <- 100000
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 2,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
View(simulation_results)
sims_parameters <- tidyr::crossing(
Y_prev = c(0.2),
X_categorical = c(TRUE, FALSE),
R_prev = c(0.9, 0.8, 0.5), #10%, 20% and 50% missingness, respectively
beta_x1_dev = c(0, 0.5),
beta_x2_dev = c(0, 0.5),
beta_Y_dev = c(0, 0.5),
beta_x1_val = c(0, 0.5),
beta_x2_val = c(0, 0.5),
beta_Y_val = c(0, 0.5),
rho_X = c(0, 0.75),
gamma_x1 = c(0, 0.5),
gamma_x2 = 0.5
) %>%
mutate(beta_cases_dev = case_when(
beta_x1_dev == 0 & beta_x2_dev == 0 & beta_Y_dev == 0 ~ "DAG_b_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_c_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_d_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_e_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_f_dev",
TRUE ~ as.character("not_applicable")
),
beta_cases_val = case_when(
beta_x1_val == 0 & beta_x2_val == 0 & beta_Y_val == 0 ~ "DAG_b_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_c_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_d_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_e_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_f_val",
TRUE ~ as.character("not_applicable")
)) %>%
filter(beta_cases_dev != "not_applicable" &
beta_cases_val != "not_applicable") %>%
select(-beta_cases_dev,
-beta_cases_val)
library(tidyverse)
# Define a dataset that includes all combinations of simulation parameters:
sims_parameters <- tidyr::crossing(
Y_prev = c(0.2),
X_categorical = c(TRUE, FALSE),
R_prev = c(0.9, 0.8, 0.5), #10%, 20% and 50% missingness, respectively
beta_x1_dev = c(0, 0.5),
beta_x2_dev = c(0, 0.5),
beta_Y_dev = c(0, 0.5),
beta_x1_val = c(0, 0.5),
beta_x2_val = c(0, 0.5),
beta_Y_val = c(0, 0.5),
rho_X = c(0, 0.75),
gamma_x1 = c(0, 0.5),
gamma_x2 = 0.5
) %>%
mutate(beta_cases_dev = case_when(
beta_x1_dev == 0 & beta_x2_dev == 0 & beta_Y_dev == 0 ~ "DAG_b_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_c_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_d_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_e_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_f_dev",
TRUE ~ as.character("not_applicable")
),
beta_cases_val = case_when(
beta_x1_val == 0 & beta_x2_val == 0 & beta_Y_val == 0 ~ "DAG_b_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_c_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_d_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_e_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_f_val",
TRUE ~ as.character("not_applicable")
)) %>%
filter(beta_cases_dev != "not_applicable" &
beta_cases_val != "not_applicable") %>%
select(-beta_cases_dev,
-beta_cases_val)
?case_when
# Define a dataset that includes all combinations of simulation parameters:
sims_parameters <- tidyr::crossing(
Y_prev = c(0.2),
X_categorical = c(TRUE, FALSE),
R_prev = c(0.9, 0.8, 0.5), #10%, 20% and 50% missingness, respectively
beta_x1_dev = c(0, 0.5),
beta_x2_dev = c(0, 0.5),
beta_Y_dev = c(0, 0.5),
beta_x1_val = c(0, 0.5),
beta_x2_val = c(0, 0.5),
beta_Y_val = c(0, 0.5),
rho_X = c(0, 0.75),
gamma_x1 = c(0, 0.5),
gamma_x2 = 0.5
) %>%
dplyr::mutate(beta_cases_dev = dplyr::case_when(
beta_x1_dev == 0 & beta_x2_dev == 0 & beta_Y_dev == 0 ~ "DAG_b_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_c_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_d_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_e_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_f_dev",
TRUE ~ as.character("not_applicable")
),
beta_cases_val = dplyr::case_when(
beta_x1_val == 0 & beta_x2_val == 0 & beta_Y_val == 0 ~ "DAG_b_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_c_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_d_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_e_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_f_val",
TRUE ~ as.character("not_applicable")
)) %>%
dplyr::filter(beta_cases_dev != "not_applicable" &
beta_cases_val != "not_applicable") %>%
dplyr::select(-beta_cases_dev,
-beta_cases_val)
dim(sims_parameters)
source("Code/00_Simulation_Functions.R")
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 2,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
source("Code/00_Simulation_Functions.R")
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 2,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
View(simulation_results)
View(sims_parameters)
View(simulation_results)
#run the simulation study:
simulation_results <- simulation_nrun_fnc(n_iter = 20,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[s],
X_categorical = sims_parameters$X_categorical[s],
R_prev = sims_parameters$R_prev[s],
beta_x1_dev = sims_parameters$beta_x1_dev[s],
beta_x2_dev = sims_parameters$beta_x2_dev[s],
beta_Y_dev = sims_parameters$beta_Y_dev[s],
beta_x1_val = sims_parameters$beta_x1_val[s],
beta_x2_val = sims_parameters$beta_x2_val[s],
beta_Y_val = sims_parameters$beta_Y_val[s],
rho_X = sims_parameters$rho_X[s],
gamma_x1 = sims_parameters$gamma_x1[s],
gamma_x2 = sims_parameters$gamma_x2[s])
View(simulation_results)
View(simulation_results %>% group_by(CPM, Validation_Dataset) %>% summarise(across(CalInt_est:Brier_var, ~mean(.))))
#Load the simulation functions
source("./00_Simulation_Functions.R")
#Load the simulation functions
source("Code/00_Simulation_Functions.R")
library(tidyverse)
# Define a dataset that includes all combinations of simulation parameters:
sims_parameters <- tidyr::crossing(
Y_prev = c(0.2),
X_categorical = c(TRUE, FALSE),
R_prev = c(0.9, 0.8, 0.5), #10%, 20% and 50% missingness, respectively
beta_x1_dev = c(0, 0.5),
beta_x2_dev = c(0, 0.5),
beta_Y_dev = c(0, 0.5),
beta_x1_val = c(0, 0.5),
beta_x2_val = c(0, 0.5),
beta_Y_val = c(0, 0.5),
rho_X = c(0, 0.75),
gamma_x1 = c(0, 0.5),
gamma_x2 = 0.5
) %>%
dplyr::mutate(beta_cases_dev = dplyr::case_when(
beta_x1_dev == 0 & beta_x2_dev == 0 & beta_Y_dev == 0 ~ "DAG_b_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_c_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_d_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_e_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_f_dev",
TRUE ~ as.character("not_applicable")
),
beta_cases_val = dplyr::case_when(
beta_x1_val == 0 & beta_x2_val == 0 & beta_Y_val == 0 ~ "DAG_b_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_c_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_d_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_e_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_f_val",
TRUE ~ as.character("not_applicable")
)) %>%
dplyr::filter(beta_cases_dev != "not_applicable" &
beta_cases_val != "not_applicable") %>%
dplyr::select(-beta_cases_dev,
-beta_cases_val)
# number of repeats per scenario
n_rep <- 100
#Define the size of development, validation and implementation, respectively:
N_dev <- 100000
N_val <- 100000
head(sims_parameters)
taskid <- 1
simulation_nrun_fnc(n_iter = 1,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[taskid],
X_categorical = sims_parameters$X_categorical[taskid],
R_prev = sims_parameters$R_prev[taskid],
beta_x1_dev = sims_parameters$beta_x1_dev[taskid],
beta_x2_dev = sims_parameters$beta_x2_dev[taskid],
beta_Y_dev = sims_parameters$beta_Y_dev[taskid],
beta_x1_val = sims_parameters$beta_x1_val[taskid],
beta_x2_val = sims_parameters$beta_x2_val[taskid],
beta_Y_val = sims_parameters$beta_Y_val[taskid],
rho_X = sims_parameters$rho_X[taskid],
gamma_x1 = sims_parameters$gamma_x1[taskid],
gamma_x2 = sims_parameters$gamma_x2[taskid])
300/24
library(furrr)
?plan
(availableCores() - 3)
12/5
plan(multicore, workers = (availableCores() - 3))
plan(multisession, workers = (availableCores() - 3))
dim(sims_parameters %>%
dplyr::filter(X_categorical == FALSE))
simulation_results_XContinuous <- sims_parameters %>%
dplyr::filter(X_categorical == FALSE) %>%
dplyr::mutate("results" = future_pmap(.l = list(n_iter = 100,
N_dev = 100000,
N_val = 100000,
Y_prev = Y_prev,
X_categorical = X_categorical,
R_prev = R_prev,
beta_x1_dev = beta_x1_dev,
beta_x2_dev = beta_x2_dev,
beta_Y_dev = beta_Y_dev,
beta_x1_val = beta_x1_val,
beta_x2_val = beta_x2_val,
beta_Y_val = beta_Y_val,
rho_X = rho_X,
gamma_x1 = gamma_x1,
gamma_x2 = gamma_x2),
.f = simulation_nrun_fnc,
.progress = TRUE,
.options = furrr_options(seed = as.integer(465475))))
system.time(simulation_nrun_fnc(n_iter = 1,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[taskid],
X_categorical = sims_parameters$X_categorical[taskid],
R_prev = sims_parameters$R_prev[taskid],
beta_x1_dev = sims_parameters$beta_x1_dev[taskid],
beta_x2_dev = sims_parameters$beta_x2_dev[taskid],
beta_Y_dev = sims_parameters$beta_Y_dev[taskid],
beta_x1_val = sims_parameters$beta_x1_val[taskid],
beta_x2_val = sims_parameters$beta_x2_val[taskid],
beta_Y_val = sims_parameters$beta_Y_val[taskid],
rho_X = sims_parameters$rho_X[taskid],
gamma_x1 = sims_parameters$gamma_x1[taskid],
gamma_x2 = sims_parameters$gamma_x2[taskid]))
source("Code/00_Simulation_Functions.R")
library(tidyverse)
# Define a dataset that includes all combinations of simulation parameters:
sims_parameters <- tidyr::crossing(
Y_prev = c(0.2),
X_categorical = c(TRUE, FALSE),
R_prev = c(0.9, 0.8, 0.5), #10%, 20% and 50% missingness, respectively
beta_x1_dev = c(0, 0.5),
beta_x2_dev = c(0, 0.5),
beta_Y_dev = c(0, 0.5),
beta_x1_val = c(0, 0.5),
beta_x2_val = c(0, 0.5),
beta_Y_val = c(0, 0.5),
rho_X = c(0, 0.75),
gamma_x1 = c(0, 0.5),
gamma_x2 = 0.5
) %>%
dplyr::mutate(beta_cases_dev = dplyr::case_when(
beta_x1_dev == 0 & beta_x2_dev == 0 & beta_Y_dev == 0 ~ "DAG_b_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_c_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_d_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_e_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_f_dev",
TRUE ~ as.character("not_applicable")
),
beta_cases_val = dplyr::case_when(
beta_x1_val == 0 & beta_x2_val == 0 & beta_Y_val == 0 ~ "DAG_b_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_c_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_d_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_e_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_f_val",
TRUE ~ as.character("not_applicable")
)) %>%
dplyr::filter(beta_cases_dev != "not_applicable" &
beta_cases_val != "not_applicable") %>%
dplyr::select(-beta_cases_dev,
-beta_cases_val)
taskid <- 100
# number of repeats per scenario
n_rep <- 100
#Define the size of development, validation and implementation, respectively:
N_dev <- 100000
N_val <- 100000
system.time(simulation_nrun_fnc(n_iter = 1,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[taskid],
X_categorical = sims_parameters$X_categorical[taskid],
R_prev = sims_parameters$R_prev[taskid],
beta_x1_dev = sims_parameters$beta_x1_dev[taskid],
beta_x2_dev = sims_parameters$beta_x2_dev[taskid],
beta_Y_dev = sims_parameters$beta_Y_dev[taskid],
beta_x1_val = sims_parameters$beta_x1_val[taskid],
beta_x2_val = sims_parameters$beta_x2_val[taskid],
beta_Y_val = sims_parameters$beta_Y_val[taskid],
rho_X = sims_parameters$rho_X[taskid],
gamma_x1 = sims_parameters$gamma_x1[taskid],
gamma_x2 = sims_parameters$gamma_x2[taskid]))
source("Code/00_Simulation_Functions.R")
library(tidyverse)
# Define a dataset that includes all combinations of simulation parameters:
sims_parameters <- tidyr::crossing(
Y_prev = c(0.2),
X_categorical = c(TRUE, FALSE),
R_prev = c(0.9, 0.8, 0.5), #10%, 20% and 50% missingness, respectively
beta_x1_dev = c(0, 0.5),
beta_x2_dev = c(0, 0.5),
beta_Y_dev = c(0, 0.5),
beta_x1_val = c(0, 0.5),
beta_x2_val = c(0, 0.5),
beta_Y_val = c(0, 0.5),
rho_X = c(0, 0.75),
gamma_x1 = c(0, 0.5),
gamma_x2 = 0.5
) %>%
dplyr::mutate(beta_cases_dev = dplyr::case_when(
beta_x1_dev == 0 & beta_x2_dev == 0 & beta_Y_dev == 0 ~ "DAG_b_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_c_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev == 0 ~ "DAG_d_dev",
beta_x1_dev == 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_e_dev",
beta_x1_dev != 0 & beta_x2_dev != 0 & beta_Y_dev != 0 ~ "DAG_f_dev",
TRUE ~ as.character("not_applicable")
),
beta_cases_val = dplyr::case_when(
beta_x1_val == 0 & beta_x2_val == 0 & beta_Y_val == 0 ~ "DAG_b_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_c_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val == 0 ~ "DAG_d_val",
beta_x1_val == 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_e_val",
beta_x1_val != 0 & beta_x2_val != 0 & beta_Y_val != 0 ~ "DAG_f_val",
TRUE ~ as.character("not_applicable")
)) %>%
dplyr::filter(beta_cases_dev != "not_applicable" &
beta_cases_val != "not_applicable") %>%
dplyr::select(-beta_cases_dev,
-beta_cases_val)
taskid <- 100
#Define the size of development, validation and implementation, respectively:
N_dev <- 100000
N_val <- 100000
system.time(simulation_nrun_fnc(n_iter = 1,
N_dev = N_dev,
N_val = N_val,
Y_prev = sims_parameters$Y_prev[taskid],
X_categorical = sims_parameters$X_categorical[taskid],
R_prev = sims_parameters$R_prev[taskid],
beta_x1_dev = sims_parameters$beta_x1_dev[taskid],
beta_x2_dev = sims_parameters$beta_x2_dev[taskid],
beta_Y_dev = sims_parameters$beta_Y_dev[taskid],
beta_x1_val = sims_parameters$beta_x1_val[taskid],
beta_x2_val = sims_parameters$beta_x2_val[taskid],
beta_Y_val = sims_parameters$beta_Y_val[taskid],
rho_X = sims_parameters$rho_X[taskid],
gamma_x1 = sims_parameters$gamma_x1[taskid],
gamma_x2 = sims_parameters$gamma_x2[taskid]))
80*100
80/60
*100
(80/60)*100
600/15
40*((80/60)*100)
(40*((80/60)*100))/24
((80/60)*100)/60
(40*(((80/60)*100)/60))/24
library(tidyverse)
simulation_results_all <- read_rds(here::here("Code",
"simulation_results_all.RDS"))
simulation_results_all <- read_rds(here::here("Code",
"simulation_results_all.RDS"))
View(simulation_results_all)
unique(simulation_results_all$Simulation_Scenario)
sort(unique(simulation_results_all$Simulation_Scenario))
length(sort(unique(simulation_results_all$Simulation_Scenario)))
